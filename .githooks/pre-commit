#!/usr/bin/env bash
set -euo pipefail

# Run heuristic secret scan before commit
ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

if bash "$ROOT_DIR/tests/security/scan_secrets.sh"; then
  exit 0
else
  echo "\n[pre-commit] Secret scan failed. Fix issues or bypass intentionally with --no-verify." >&2
  exit 1
fi

